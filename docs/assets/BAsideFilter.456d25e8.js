import{_ as M,r as $,i as R,o as i,c as v,a as u,e as Q,I as E,n as H,b as V,w as T,d as y,W as b,g,f as S,Z as U,k as F,F as D,V as w,X as A,Y as B}from"./index.fcade5f2.js";import{Q as Y,a as C}from"./QBtn.26e56c48.js";import{B as x,Q as L}from"./BButton.5bf7fd6b.js";import{C as N,Q as P}from"./ClosePopup.3ff64172.js";import{Q as j}from"./QDate.4116b364.js";import{B as O}from"./BTag.a4df401c.js";const q={name:"BLayoutPage",props:{blind:Boolean,omitToClose:String},setup(s){const a=$(null),r=$(!1),n=_=>s.omitToClose.split(",").map(l=>l.trim()).some(l=>!!_.target.closest(`${l}`));return R(()=>{["click","touchstart"].forEach(_=>{document.addEventListener(_,c=>{var m;const l=c.target.closest(`.${(m=a.value)==null?void 0:m.className.split(" ")[0]}`);r.value&&!l&&!n(c)&&(c.preventDefault(),r.value=!1)})},{passive:!1})}),{aside:a,opened:r}}},z={class:"layout__a-inner"},W={class:"layout__main"};function X(s,a,r,n,_,c){return i(),v("div",{class:H(["layout container",{"layout_aside-blind":r.blind}])},[u("aside",{class:H(["layout__aside",{opened:n.opened}]),ref:"aside"},[u("button",{class:"layout__a-toggle",onClick:a[0]||(a[0]=Q(l=>n.opened=!n.opened,["prevent"]))}),u("button",{class:"layout__a-close",onClick:a[1]||(a[1]=Q(l=>n.opened=!1,["prevent"]))}),u("div",z,[E(s.$slots,"sidebar")])],2),u("main",W,[E(s.$slots,"content")])],2)}var pe=M(q,[["render",X]]);const Z={name:"BModalRange",components:{BButton:x},emits:["update:range"],props:{range:[Object,String]},setup(s){return{}}},G={class:"m-range"},J=u("h2",{class:"m-range__title"},"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0435\u0440\u0438\u043E\u0434",-1);function K(s,a,r,n,_,c){const l=V("b-button");return i(),v("div",G,[T(y(Y,{class:"m-range__close",icon:"close",flat:"",round:"",dense:""},null,512),[[N]]),J,y(j,{class:"m-range__datepicker","model-value":r.range,"onUpdate:modelValue":a[0]||(a[0]=m=>s.$emit("update:range",m)),mask:"MM.DD.YYYY",minimal:"",range:"",flat:""},null,8,["model-value"]),T((i(),b(l,{class:"m-range__button button_noshadow"},{default:g(()=>[S("\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C")]),_:1})),[[N]])])}var I=M(Z,[["render",K]]);const ee={name:"BAsideFilter",emits:["click","input","clear"],components:{BTag:O,BModalRange:I},props:{filters:{type:Array,required:!0},moreText:{type:String,default:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0441\u0435"}},setup(s,{emit:a}){const r=U([]),n=t=>a("clear"),_=(t,e)=>r[e]=t,c=(t,e,d)=>a("click",{block:e,button:d}),l=(t,e)=>a("input",{block:e,search:t}),m=t=>{let e="";return typeof t=="string"?e=t:t&&Object.keys(t).length&&(e=`\u043E\u0442 ${t.from} \u0434\u043E ${t.to}`),e},o=F(()=>{for(const t in s.filters){let{search:e,range:d,buttons:f}=s.filters[t],p=f.some(k=>k.active);if(!!e||!!(d&&Object.keys(d).length)||!!p)return!0}return!1});return R(()=>{r.forEach((t,e)=>{const d=+t.dataset.hidden,f=t.querySelectorAll(".filter__item"),p=document.createElement("button");p.innerText=s.moreText,p.className="filter__showall",f.forEach((k,h)=>{h>=d&&(k.style.display="none")}),f.length>d&&(t.append(p),p.addEventListener("click",k=>{f.forEach((h,re)=>h.removeAttribute("style")),p.remove()}))})}),{rangeModal:$(!1),updateBlockRefs:_,clickHandler:c,inputHandler:l,clearHandler:n,rangeValue:m,disabled:o}}},te={class:"filter"},ae=["data-hidden"],ne={class:"filter__title"},oe={class:"filter__items"},se=["disabled"];function le(s,a,r,n,_,c){const l=V("b-modal-range"),m=V("b-tag");return i(),v("div",te,[(i(!0),v(D,null,w(r.filters,(o,t)=>(i(),v("div",{class:"filter__block",ref_for:!0,ref:e=>n.updateBlockRefs(e,t),"data-hidden":o.hidden,key:t},[u("h3",ne,A(o.title),1),"search"in o?(i(),b(L,{key:0,debounce:"500",class:"filter__search",label:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F\u043C",color:"accent",outlined:"","model-value":o.search,"onUpdate:modelValue":e=>n.inputHandler(e,t)},{prepend:g(()=>[y(C,{name:"search"})]),append:g(()=>[y(C,{name:"close",class:"cursor-pointer",onClick:e=>n.inputHandler("",t)},null,8,["onClick"])]),_:2},1032,["model-value","onUpdate:modelValue"])):B("",!0),"range"in o?(i(),b(L,{key:1,"model-value":n.rangeValue(o.range),onClick:a[0]||(a[0]=e=>n.rangeModal=!0),class:"filter__range",label:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0435\u0440\u0438\u043E\u0434",debounce:"500",color:"accent",outlined:"",readonly:""},{prepend:g(()=>[y(C,{name:"event"})]),_:2},1032,["model-value"])):B("",!0),"range"in o?(i(),b(P,{key:2,modelValue:n.rangeModal,"onUpdate:modelValue":a[1]||(a[1]=e=>n.rangeModal=e),"transition-duration":"500"},{default:g(()=>[y(l,{range:o.range,"onUpdate:range":e=>o.range=e},null,8,["range","onUpdate:range"])]),_:2},1032,["modelValue"])):B("",!0),u("div",oe,[(i(!0),v(D,null,w(o.buttons,(e,d)=>(i(),b(m,{key:d,cls:["filter__item tag_base tag_mid",{active:e.active}],onClick:f=>n.clickHandler(s.e,t,d),button:""},{default:g(()=>[S(A(e.name),1)]),_:2},1032,["cls","onClick"]))),128))])],8,ae))),128)),u("button",{class:"filter__clear",onClick:a[2]||(a[2]=(...o)=>n.clearHandler&&n.clearHandler(...o)),disabled:!n.disabled},"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",8,se)])}var fe=M(ee,[["render",le]]);export{pe as B,fe as a};
